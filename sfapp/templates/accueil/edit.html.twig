{% extends 'base.html.twig' %}

{% block title %}Modifier le batiment{% endblock %}

{% block content %}
    <link rel="stylesheet" href="{{ asset('style/ajoutBatiment.css') }}">
{% endblock %}

{% block header %}
    <div class="header-titre">
    <p id="header-titre"><strong>MODIFIER UN BATIMENT</strong></p><div id="bar"></div><p id="header-titre-batiment">BATIMENT : <strong>{{ batiment_nom }}</strong></p>
    </div>{% endblock %}

{% block body %}
    <div id="message-confirmation" style="display: none;">
        <p>Etes-vous sur de supprimer cette étage avec toute ses salles ?</p>
        <button id="confirm-cancel-button" class="button-type2 button-cancel"> ANNULER</button>
        <button id="confirm-delete-button" class="button-type2 button-confirm" data-delete-batiment="true"> SUPPRIMER</button>
    </div>

    <div id="page-body">
        <div id="form-content" class="container">
            {{ form_start(formBatiment, {'attr': {'id': 'ajoutBatimentForm'}}) }}
            <svg viewBox="0 0 31 35" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.875 0C1.73568 0 0 1.46973 0 3.28125V31.7188C0 33.5303 1.73568 35 3.875 35H11.625V29.5312C11.625 27.7197 13.3607 26.25 15.5 26.25C17.6393 26.25 19.375 27.7197 19.375 29.5312V35H27.125C29.2643 35 31 33.5303 31 31.7188V3.28125C31 1.46973 29.2643 0 27.125 0H3.875ZM5.16667 16.4062C5.16667 15.8047 5.74792 15.3125 6.45833 15.3125H9.04167C9.75208 15.3125 10.3333 15.8047 10.3333 16.4062V18.5938C10.3333 19.1953 9.75208 19.6875 9.04167 19.6875H6.45833C5.74792 19.6875 5.16667 19.1953 5.16667 18.5938V16.4062ZM14.2083 15.3125H16.7917C17.5021 15.3125 18.0833 15.8047 18.0833 16.4062V18.5938C18.0833 19.1953 17.5021 19.6875 16.7917 19.6875H14.2083C13.4979 19.6875 12.9167 19.1953 12.9167 18.5938V16.4062C12.9167 15.8047 13.4979 15.3125 14.2083 15.3125ZM20.6667 16.4062C20.6667 15.8047 21.2479 15.3125 21.9583 15.3125H24.5417C25.2521 15.3125 25.8333 15.8047 25.8333 16.4062V18.5938C25.8333 19.1953 25.2521 19.6875 24.5417 19.6875H21.9583C21.2479 19.6875 20.6667 19.1953 20.6667 18.5938V16.4062ZM6.45833 6.5625H9.04167C9.75208 6.5625 10.3333 7.05469 10.3333 7.65625V9.84375C10.3333 10.4453 9.75208 10.9375 9.04167 10.9375H6.45833C5.74792 10.9375 5.16667 10.4453 5.16667 9.84375V7.65625C5.16667 7.05469 5.74792 6.5625 6.45833 6.5625ZM12.9167 7.65625C12.9167 7.05469 13.4979 6.5625 14.2083 6.5625H16.7917C17.5021 6.5625 18.0833 7.05469 18.0833 7.65625V9.84375C18.0833 10.4453 17.5021 10.9375 16.7917 10.9375H14.2083C13.4979 10.9375 12.9167 10.4453 12.9167 9.84375V7.65625ZM21.9583 6.5625H24.5417C25.2521 6.5625 25.8333 7.05469 25.8333 7.65625V9.84375C25.8333 10.4453 25.2521 10.9375 24.5417 10.9375H21.9583C21.2479 10.9375 20.6667 10.4453 20.6667 9.84375V7.65625C20.6667 7.05469 21.2479 6.5625 21.9583 6.5625Z"/>
            </svg>
            <p>Nom de Batiment : </p>
            <div class="form-part">
                {{ form_widget(formBatiment) }}
            </div>

            {{ form_end(formBatiment) }}

            <div class="separation_form"></div>
            <div class="etages_batiment">
                <div class="title_etage">
                    <div class="title">
                        <svg viewBox="0 0 33 30" xmlns="http://www.w3.org/2000/svg">
                            <path xmlns="http://www.w3.org/2000/svg" d="M14.9854 0.303252C15.9457 -0.101084 17.0543 -0.101084 18.0146 0.303252L32.1041 6.2218C32.652 6.45034 33 6.94843 33 7.49927C33 8.0501 32.652 8.5482 32.1041 8.77674L18.0146 14.6953C17.0543 15.0996 15.9457 15.0996 14.9854 14.6953L0.895899 8.77674C0.348047 8.54234 0 8.04424 0 7.49927C0 6.95429 0.348047 6.45034 0.895899 6.2218L14.9854 0.303252ZM28.6752 12.281L32.1041 13.7225C32.652 13.9511 33 14.4492 33 15C33 15.5508 32.652 16.0489 32.1041 16.2775L18.0146 22.196C17.0543 22.6004 15.9457 22.6004 14.9854 22.196L0.895899 16.2775C0.348047 16.0431 0 15.545 0 15C0 14.455 0.348047 13.9511 0.895899 13.7225L4.3248 12.281L14.1217 16.3947C15.6299 17.0275 17.3701 17.0275 18.8783 16.3947L28.6752 12.281ZM18.8783 23.8954L28.6752 19.7817L32.1041 21.2233C32.652 21.4518 33 21.9499 33 22.5007C33 23.0516 32.652 23.5497 32.1041 23.7782L18.0146 29.6967C17.0543 30.1011 15.9457 30.1011 14.9854 29.6967L0.895899 23.7782C0.348047 23.5438 0 23.0457 0 22.5007C0 21.9558 0.348047 21.4518 0.895899 21.2233L4.3248 19.7817L14.1217 23.8954C15.6299 24.5283 17.3701 24.5283 18.8783 23.8954Z"/>
                        </svg>
                        <p>Liste des Etages :</p>
                    </div>
                    <div class="bouton-ajout-etage">
                        <button id="openModal" class="button-type1 button-confirm">
                            <span class="bouton-ajout-texte">Ajouter un étage</span>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344l0-64-64
                                    0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3
                                    0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="separation_form"></div>
                <div class="list_batiment">
                    {% for etage in etages %}
                        <div class="etage_batiment">
                            <div class="etage_top">
                                <p class="nom_etage"><strong>{{ etage.nomComplet }}</strong></p>
                                <div class="separation_etage"></div>
                            </div>
                            <div class="etage_bottom">
                                <div class="salle_etage">
                                    <svg viewBox="0 0 35 29" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M0 2.41667C0 1.07995 1.11719 0 2.5 0H32.5C33.8828 0 35 1.07995 35 2.41667C35 3.75339 33.8828 4.83333 32.5 4.83333H2.5C1.11719 4.83333 0 3.75339 0 2.41667ZM0 14.5C0 13.1633 1.11719 12.0833 2.5 12.0833H32.5C33.8828 12.0833 35 13.1633 35 14.5C35 15.8367 33.8828 16.9167 32.5 16.9167H2.5C1.11719 16.9167 0 15.8367 0 14.5ZM35 26.5833C35 27.9201 33.8828 29 32.5 29H2.5C1.11719 29 0 27.9201 0 26.5833C0 25.2466 1.11719 24.1667 2.5 24.1667H32.5C33.8828 24.1667 35 25.2466 35 26.5833Z"/>
                                    </svg>
                                    <p>{{ arrayOfNbSalle[loop.index0] }} Salles</p>
                                </div>
                                <div id="bouton_etage"
                                data-nom-etage="{{ etage.nomComplet }}"
                                data-id-etage="{{ etage.id }}"
                                >
                                    <div class ="buttons-display">
                                        <button class="delete-btn-etage button-cancel delete active">
                                            <svg fill ="white" viewBox="0 0 448 512"><path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"/></svg>
                                        </button>
                                        <button class="edit-btn-etage button-confirm" onclick="location.href = '{{ path("app_edit_batiment", {"idBatiment": idBatiment, "idEtage": etage.id}) }}';">
                                            <svg fill="white" height="1.15vw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                <path d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>


        <div id="edit-button-container">
            <button type="submit" form="ajoutBatimentForm" class="button-type1 button-confirm" id="edit-btn">
                TERMINER
                <!-- check icon -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                    <path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3
                    0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5
                    45.3 0z"/>
                </svg>
            </button>
        </div>
             {% if idEtage!=null %}
                 <div id="modalBackdrop"></div>

                <!-- Fenêtre modale -->
                <div id="customModal" class="custom-modal">
                <div class="custom-modal-content">
                    <div class="modal-container mt-5">
                        <h1 class="display-4 text-center mb-4">Modifier l'étage</h1>
                        <div class="row justify-content-center">
                            <div class="col-md-6">
                                <div class="card shadow-sm">
                                    <div class="card-body">
                                        {{ form_start(formEditEtage) }}
                                            {% for field in formEditEtage %}
                                                <div class="nom_batiment">
                                                    {{ form_widget(form) }}
                                                </div>
                                            {% endfor %}

                                            <div class="btn_form">
                                                <a class="close-button button-type1 button-cancel" href="{{ path("app_edit_batiment", {"idBatiment": idBatiment}) }}">
                                                    ANNULER
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                                                        <path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6
                                                                105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0
                                                                45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256
                                                                342.6 150.6z"/>
                                                    </svg>
                                                </a>
                                                <button type="submit" class="btn_valider button-type1 button-confirm">
                                                    VALIDER
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                                        <path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/>
                                                    </svg>
                                                </button>
                                            </div>
                                        {{ form_end(formEditEtage) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            {% endif %}
    </div>

    <!-- Fond grisé -->
    <div id="modalBackdrop" class="hidden"></div>

    <!-- Fenêtre modale -->
    <div id="customModal" class="custom-modal hidden">
    <div class="custom-modal-content">
        <div class="modal-container mt-5">
            <h1 class="display-4 text-center mb-4">Ajouter un nouvelle étage</h1>
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            {{ form_start(formEtage) }}

                            {# Loop through each form field to apply styles individually #}
                            {% for field in formEtage %}
                                <div class="nom_batiment">
                                    {{ form_widget(field, {'attr': {'class': 'form-control'}}) }}
                                </div>
                            {% endfor %}

                            <div class="btn_form">
                                    <span id="closeModal" class="close-button button-type1 button-cancel">
                                        ANNULER
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                                            <path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6
                                                    105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0
                                                    45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256
                                                    342.6 150.6z"/>
                                        </svg>
                                    </span>
                                <button type="submit" class="btn_valider button-type1 button-confirm">
                                    VALIDER
                                    <!-- check icon -->
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                        <path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3
                                                    0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5
                                                    45.3 0z"/>
                                    </svg>
                                </button>
                            </div>
                            {{ form_end(formEtage) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




{% endblock %}

{% block script %}
    <script src="{{ asset('js/EditBatiment.js') }}"></script>
{% endblock %}